MODULE Test;
IMPORT CR := Coroutines, Out := Out_sys;


VAR
	c1: CR.Coroutine;
	d1: CR.Userdata;
	r: INTEGER;


PROCEDURE Calc(coro: CR.Coroutine; r: INTEGER): INTEGER;
BEGIN
	Out.String("calculating... ");
	CR.Yield(c1, r);
	Out.String("done."); Out.Ln;
	RETURN 10
END Calc;


BEGIN
	NEW(d1);
	c1 := CR.Create(Calc, d1);
	CR.Yield(c1, r);
	
END Test.
