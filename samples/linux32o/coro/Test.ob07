MODULE Test;
IMPORT CR := Coroutines, Out := Out_sys;


VAR
	c1: CR.Coroutine;
	t1: CR.Thread;
	v1: INTEGER;


PROCEDURE Calc(coro: CR.Coroutine): INTEGER;
BEGIN
	Out.String("calculating... ");
	CR.Yield(c1, 10);
	Out.String("done."); Out.Ln;
	RETURN 0
END Calc;


BEGIN
	NEW(t1);
	c1 := CR.Create(t1, Calc);
	CR.Resume(c1, v1);
	CR.Resume(c1, v1);
	
END Test.
